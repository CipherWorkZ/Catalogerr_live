{% extends "base.html" %}
{% block title %}Changelog - Catalogerr{% endblock %}

{% block content %}
<div class="changelog-container">
  <h1 class="page-title">üìú Catalogerr Changelog</h1>

  <!-- Latest Version -->
  <div class="changelog-entry">
    <h2>v1.0.0 <span class="date">2025-10-04</span></h2>
    <ul>
      <li class="added">‚ú® Added: Logo integration in sidebar with clickable link back to home</li>
      <li class="added">‚ú® Added: Favicon/logo support for browser tabs</li>
      <li class="added">‚ú® Added: Static Changelog page to track changes and fixes</li>
      <li class="added">‚ú® Added: API endpoint <code>/api/v3/enrich</code> to re-enrich metadata posters</li>
      <li class="added">‚ú® Added: Poster caching with SHA1-hashed filenames in <code>/static/poster</code></li>
      <li class="added">‚ú® Added: Automatic fallback strategy for posters:
        <ul>
          <li>Lookup via TMDB ID</li>
          <li>Fallback to TMDB title search</li>
          <li>Fallback to static default poster</li>
        </ul>
      </li>
      <li class="added">‚ú® Added: Re-enrich task now logs how many posters were updated vs fallback</li>
      <li class="changed">üîß Changed: Environment editor widgets are now collapsible and persist state with localStorage</li>
      <li class="fixed">üêõ Fixed: Scheduler task registration (stable IDs, correct kwargs)</li>
      <li class="fixed">üêõ Fixed: 404 issues for missing posters by forcing re-cache and DB update</li>
      <li class="fixed">üêõ Fixed: Sidebar logo sizing and alignment to left</li>
    </ul>
  </div>

  <!-- Previous Versions -->
  <div class="changelog-entry">
    <h2>v0.9.0 <span class="date">2025-09-28</span></h2>
    <ul>
      <li class="added">‚ú® Added: Basic Flask API endpoints (<code>/api/v3</code> mimic)</li>
      <li class="added">‚ú® Added: SSE stream for scan status</li>
      <li class="fixed">üêõ Fixed: Missing static file path in Docker</li>
      <li class="known">‚ö†Ô∏è Known: Env editor page missing collapsible widgets</li>
    </ul>
  </div>
</div>
{% endblock %}

{% block styles %}
<style>
.page-title {
  font-size: 1.8rem;
  margin-bottom: 20px;
  font-weight: 600;
  color: #4dabf7;
}

.changelog-container {
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.changelog-entry {
  background: #2a2a3c;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.5);
}

.changelog-entry h2 {
  margin: 0 0 12px;
  font-size: 1.2rem;
  color: #fff;
}

.changelog-entry .date {
  font-size: 0.9rem;
  color: #bbb;
  margin-left: 8px;
}

.changelog-entry ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.changelog-entry li {
  padding: 6px 0;
  font-size: 0.95rem;
}

.added { color: #6fdc6f; }
.fixed { color: #4dabf7; }
.changed { color: #f59f00; }
.known { color: #ff6b6b; }
</style>
{% endblock %}
